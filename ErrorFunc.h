//
// Created by Fish on 16/11/2017.
//

#ifndef TORICCODE_ERRORFUNC_H
#define TORICCODE_ERRORFUNC_H
#include <fstream>
enum DataError{
    NO_ERROR,
    X_ERROR,
    Y_ERROR,
    Z_ERROR
};

inline bool isError(int code_value, int error){
    return code_value == error or code_value == Y_ERROR;
}

const int prod_table[4][4] = {{0,1,2,3},
                              {1,0,3,2},
                              {2,3,0,1},
                              {3,2,1,0}};
inline int errorComposite(const int error0, const int error1) {
    return prod_table[error0][error1];
}

void load_cerr_table();

std::tuple<int, int> pass_through_cnot(int cbit, int nbit);

int pass_through_H(int error);

const std::array<std::array<int, 5>,512> error_table ={
        0, 0, 0, 0, 0,
        0, 0, 0, 0, 1,
        0, 0, 0, 0, 2,
        0, 0, 0, 0, 3,
        0, 0, 0, 1, 0,
        0, 0, 0, 1, 1,
        0, 0, 0, 1, 2,
        0, 0, 0, 1, 3,
        0, 0, 0, 2, 0,
        0, 0, 0, 2, 1,
        0, 0, 0, 2, 2,
        0, 0, 0, 2, 3,
        0, 0, 0, 3, 0,
        0, 0, 0, 3, 1,
        0, 0, 0, 3, 2,
        0, 0, 0, 3, 3,
        0, 0, 1, 0, 0,
        0, 0, 1, 0, 1,
        0, 0, 1, 0, 2,
        0, 0, 1, 0, 3,
        0, 0, 1, 1, 0,
        0, 0, 1, 1, 1,
        0, 0, 1, 1, 2,
        0, 0, 1, 1, 3,
        0, 0, 1, 2, 0,
        0, 0, 1, 2, 1,
        0, 0, 1, 2, 2,
        0, 0, 1, 2, 3,
        0, 0, 1, 3, 0,
        0, 0, 1, 3, 1,
        0, 0, 1, 3, 2,
        0, 0, 1, 3, 3,
        0, 0, 2, 0, 0,
        0, 0, 2, 0, 1,
        0, 0, 2, 0, 2,
        0, 0, 2, 0, 3,
        0, 0, 2, 1, 0,
        0, 0, 2, 1, 1,
        0, 0, 2, 1, 2,
        0, 0, 2, 1, 3,
        0, 0, 2, 2, 0,
        0, 0, 2, 2, 1,
        0, 0, 2, 2, 2,
        0, 0, 2, 2, 3,
        0, 0, 2, 3, 0,
        0, 0, 2, 3, 1,
        0, 0, 2, 3, 2,
        0, 0, 2, 3, 3,
        0, 0, 3, 0, 0,
        0, 0, 3, 0, 1,
        0, 0, 3, 0, 2,
        0, 0, 3, 0, 3,
        0, 0, 3, 1, 0,
        0, 0, 3, 1, 1,
        0, 0, 3, 1, 2,
        0, 0, 3, 1, 3,
        0, 0, 3, 2, 0,
        0, 0, 3, 2, 1,
        0, 0, 3, 2, 2,
        0, 0, 3, 2, 3,
        0, 0, 3, 3, 0,
        0, 0, 3, 3, 1,
        0, 0, 3, 3, 2,
        0, 0, 3, 3, 3,
        0, 1, 0, 0, 0,
        0, 1, 0, 0, 1,
        0, 1, 0, 0, 2,
        0, 1, 0, 0, 3,
        0, 1, 0, 1, 0,
        0, 1, 0, 1, 1,
        0, 1, 0, 1, 2,
        0, 1, 0, 1, 3,
        0, 1, 0, 2, 0,
        0, 1, 0, 2, 1,
        0, 1, 0, 2, 2,
        0, 1, 0, 2, 3,
        0, 1, 0, 3, 0,
        0, 1, 0, 3, 1,
        0, 1, 0, 3, 2,
        0, 1, 0, 3, 3,
        0, 1, 1, 0, 0,
        0, 1, 1, 0, 1,
        0, 1, 1, 0, 2,
        0, 1, 1, 0, 3,
        0, 1, 1, 1, 0,
        0, 1, 1, 1, 1,
        0, 1, 1, 1, 2,
        0, 1, 1, 1, 3,
        0, 1, 1, 2, 0,
        0, 1, 1, 2, 1,
        0, 1, 1, 2, 2,
        0, 1, 1, 2, 3,
        0, 1, 1, 3, 0,
        0, 1, 1, 3, 1,
        0, 1, 1, 3, 2,
        0, 1, 1, 3, 3,
        0, 1, 2, 0, 0,
        0, 1, 2, 0, 1,
        0, 1, 2, 0, 2,
        0, 1, 2, 0, 3,
        0, 1, 2, 1, 0,
        0, 1, 2, 1, 1,
        0, 1, 2, 1, 2,
        0, 1, 2, 1, 3,
        0, 1, 2, 2, 0,
        0, 1, 2, 2, 1,
        0, 1, 2, 2, 2,
        0, 1, 2, 2, 3,
        0, 1, 2, 3, 0,
        0, 1, 2, 3, 1,
        0, 1, 2, 3, 2,
        0, 1, 2, 3, 3,
        0, 1, 3, 0, 0,
        0, 1, 3, 0, 1,
        0, 1, 3, 0, 2,
        0, 1, 3, 0, 3,
        0, 1, 3, 1, 0,
        0, 1, 3, 1, 1,
        0, 1, 3, 1, 2,
        0, 1, 3, 1, 3,
        0, 1, 3, 2, 0,
        0, 1, 3, 2, 1,
        0, 1, 3, 2, 2,
        0, 1, 3, 2, 3,
        0, 1, 3, 3, 0,
        0, 1, 3, 3, 1,
        0, 1, 3, 3, 2,
        0, 1, 3, 3, 3,
        0, 2, 0, 0, 0,
        0, 2, 0, 0, 1,
        0, 2, 0, 0, 2,
        0, 2, 0, 0, 3,
        0, 2, 0, 1, 0,
        0, 2, 0, 1, 1,
        0, 2, 0, 1, 2,
        0, 2, 0, 1, 3,
        0, 2, 0, 2, 0,
        0, 2, 0, 2, 1,
        0, 2, 0, 2, 2,
        0, 2, 0, 2, 3,
        0, 2, 0, 3, 0,
        0, 2, 0, 3, 1,
        0, 2, 0, 3, 2,
        0, 2, 0, 3, 3,
        0, 2, 1, 0, 0,
        0, 2, 1, 0, 1,
        0, 2, 1, 0, 2,
        0, 2, 1, 0, 3,
        0, 2, 1, 1, 0,
        0, 2, 1, 1, 1,
        0, 2, 1, 1, 2,
        0, 2, 1, 1, 3,
        0, 2, 1, 2, 0,
        0, 2, 1, 2, 1,
        0, 2, 1, 2, 2,
        0, 2, 1, 2, 3,
        0, 2, 1, 3, 0,
        0, 2, 1, 3, 1,
        0, 2, 1, 3, 2,
        0, 2, 1, 3, 3,
        0, 2, 2, 0, 0,
        0, 2, 2, 0, 1,
        0, 2, 2, 0, 2,
        0, 2, 2, 0, 3,
        0, 2, 2, 1, 0,
        0, 2, 2, 1, 1,
        0, 2, 2, 1, 2,
        0, 2, 2, 1, 3,
        0, 2, 2, 2, 0,
        0, 2, 2, 2, 1,
        0, 2, 2, 2, 2,
        0, 2, 2, 2, 3,
        0, 2, 2, 3, 0,
        0, 2, 2, 3, 1,
        0, 2, 2, 3, 2,
        0, 2, 2, 3, 3,
        0, 2, 3, 0, 0,
        0, 2, 3, 0, 1,
        0, 2, 3, 0, 2,
        0, 2, 3, 0, 3,
        0, 2, 3, 1, 0,
        0, 2, 3, 1, 1,
        0, 2, 3, 1, 2,
        0, 2, 3, 1, 3,
        0, 2, 3, 2, 0,
        0, 2, 3, 2, 1,
        0, 2, 3, 2, 2,
        0, 2, 3, 2, 3,
        0, 2, 3, 3, 0,
        0, 2, 3, 3, 1,
        0, 2, 3, 3, 2,
        0, 2, 3, 3, 3,
        0, 3, 0, 0, 0,
        0, 3, 0, 0, 1,
        0, 3, 0, 0, 2,
        0, 3, 0, 0, 3,
        0, 3, 0, 1, 0,
        0, 3, 0, 1, 1,
        0, 3, 0, 1, 2,
        0, 3, 0, 1, 3,
        0, 3, 0, 2, 0,
        0, 3, 0, 2, 1,
        0, 3, 0, 2, 2,
        0, 3, 0, 2, 3,
        0, 3, 0, 3, 0,
        0, 3, 0, 3, 1,
        0, 3, 0, 3, 2,
        0, 3, 0, 3, 3,
        0, 3, 1, 0, 0,
        0, 3, 1, 0, 1,
        0, 3, 1, 0, 2,
        0, 3, 1, 0, 3,
        0, 3, 1, 1, 0,
        0, 3, 1, 1, 1,
        0, 3, 1, 1, 2,
        0, 3, 1, 1, 3,
        0, 3, 1, 2, 0,
        0, 3, 1, 2, 1,
        0, 3, 1, 2, 2,
        0, 3, 1, 2, 3,
        0, 3, 1, 3, 0,
        0, 3, 1, 3, 1,
        0, 3, 1, 3, 2,
        0, 3, 1, 3, 3,
        0, 3, 2, 0, 0,
        0, 3, 2, 0, 1,
        0, 3, 2, 0, 2,
        0, 3, 2, 0, 3,
        0, 3, 2, 1, 0,
        0, 3, 2, 1, 1,
        0, 3, 2, 1, 2,
        0, 3, 2, 1, 3,
        0, 3, 2, 2, 0,
        0, 3, 2, 2, 1,
        0, 3, 2, 2, 2,
        0, 3, 2, 2, 3,
        0, 3, 2, 3, 0,
        0, 3, 2, 3, 1,
        0, 3, 2, 3, 2,
        0, 3, 2, 3, 3,
        0, 3, 3, 0, 0,
        0, 3, 3, 0, 1,
        0, 3, 3, 0, 2,
        0, 3, 3, 0, 3,
        0, 3, 3, 1, 0,
        0, 3, 3, 1, 1,
        0, 3, 3, 1, 2,
        0, 3, 3, 1, 3,
        0, 3, 3, 2, 0,
        0, 3, 3, 2, 1,
        0, 3, 3, 2, 2,
        0, 3, 3, 2, 3,
        0, 3, 3, 3, 0,
        0, 3, 3, 3, 1,
        0, 3, 3, 3, 2,
        0, 3, 3, 3, 3,
        1, 0, 0, 0, 0,
        1, 0, 0, 0, 1,
        1, 0, 0, 0, 2,
        1, 0, 0, 0, 3,
        1, 0, 0, 1, 0,
        1, 0, 0, 1, 1,
        1, 0, 0, 1, 2,
        1, 0, 0, 1, 3,
        1, 0, 0, 2, 0,
        1, 0, 0, 2, 1,
        1, 0, 0, 2, 2,
        1, 0, 0, 2, 3,
        1, 0, 0, 3, 0,
        1, 0, 0, 3, 1,
        1, 0, 0, 3, 2,
        1, 0, 0, 3, 3,
        1, 0, 1, 0, 0,
        1, 0, 1, 0, 1,
        1, 0, 1, 0, 2,
        1, 0, 1, 0, 3,
        1, 0, 1, 1, 0,
        1, 0, 1, 1, 1,
        1, 0, 1, 1, 2,
        1, 0, 1, 1, 3,
        1, 0, 1, 2, 0,
        1, 0, 1, 2, 1,
        1, 0, 1, 2, 2,
        1, 0, 1, 2, 3,
        1, 0, 1, 3, 0,
        1, 0, 1, 3, 1,
        1, 0, 1, 3, 2,
        1, 0, 1, 3, 3,
        1, 0, 2, 0, 0,
        1, 0, 2, 0, 1,
        1, 0, 2, 0, 2,
        1, 0, 2, 0, 3,
        1, 0, 2, 1, 0,
        1, 0, 2, 1, 1,
        1, 0, 2, 1, 2,
        1, 0, 2, 1, 3,
        1, 0, 2, 2, 0,
        1, 0, 2, 2, 1,
        1, 0, 2, 2, 2,
        1, 0, 2, 2, 3,
        1, 0, 2, 3, 0,
        1, 0, 2, 3, 1,
        1, 0, 2, 3, 2,
        1, 0, 2, 3, 3,
        1, 0, 3, 0, 0,
        1, 0, 3, 0, 1,
        1, 0, 3, 0, 2,
        1, 0, 3, 0, 3,
        1, 0, 3, 1, 0,
        1, 0, 3, 1, 1,
        1, 0, 3, 1, 2,
        1, 0, 3, 1, 3,
        1, 0, 3, 2, 0,
        1, 0, 3, 2, 1,
        1, 0, 3, 2, 2,
        1, 0, 3, 2, 3,
        1, 0, 3, 3, 0,
        1, 0, 3, 3, 1,
        1, 0, 3, 3, 2,
        1, 0, 3, 3, 3,
        1, 1, 0, 0, 0,
        1, 1, 0, 0, 1,
        1, 1, 0, 0, 2,
        1, 1, 0, 0, 3,
        1, 1, 0, 1, 0,
        1, 1, 0, 1, 1,
        1, 1, 0, 1, 2,
        1, 1, 0, 1, 3,
        1, 1, 0, 2, 0,
        1, 1, 0, 2, 1,
        1, 1, 0, 2, 2,
        1, 1, 0, 2, 3,
        1, 1, 0, 3, 0,
        1, 1, 0, 3, 1,
        1, 1, 0, 3, 2,
        1, 1, 0, 3, 3,
        1, 1, 1, 0, 0,
        1, 1, 1, 0, 1,
        1, 1, 1, 0, 2,
        1, 1, 1, 0, 3,
        1, 1, 1, 1, 0,
        1, 1, 1, 1, 1,
        1, 1, 1, 1, 2,
        1, 1, 1, 1, 3,
        1, 1, 1, 2, 0,
        1, 1, 1, 2, 1,
        1, 1, 1, 2, 2,
        1, 1, 1, 2, 3,
        1, 1, 1, 3, 0,
        1, 1, 1, 3, 1,
        1, 1, 1, 3, 2,
        1, 1, 1, 3, 3,
        1, 1, 2, 0, 0,
        1, 1, 2, 0, 1,
        1, 1, 2, 0, 2,
        1, 1, 2, 0, 3,
        1, 1, 2, 1, 0,
        1, 1, 2, 1, 1,
        1, 1, 2, 1, 2,
        1, 1, 2, 1, 3,
        1, 1, 2, 2, 0,
        1, 1, 2, 2, 1,
        1, 1, 2, 2, 2,
        1, 1, 2, 2, 3,
        1, 1, 2, 3, 0,
        1, 1, 2, 3, 1,
        1, 1, 2, 3, 2,
        1, 1, 2, 3, 3,
        1, 1, 3, 0, 0,
        1, 1, 3, 0, 1,
        1, 1, 3, 0, 2,
        1, 1, 3, 0, 3,
        1, 1, 3, 1, 0,
        1, 1, 3, 1, 1,
        1, 1, 3, 1, 2,
        1, 1, 3, 1, 3,
        1, 1, 3, 2, 0,
        1, 1, 3, 2, 1,
        1, 1, 3, 2, 2,
        1, 1, 3, 2, 3,
        1, 1, 3, 3, 0,
        1, 1, 3, 3, 1,
        1, 1, 3, 3, 2,
        1, 1, 3, 3, 3,
        1, 2, 0, 0, 0,
        1, 2, 0, 0, 1,
        1, 2, 0, 0, 2,
        1, 2, 0, 0, 3,
        1, 2, 0, 1, 0,
        1, 2, 0, 1, 1,
        1, 2, 0, 1, 2,
        1, 2, 0, 1, 3,
        1, 2, 0, 2, 0,
        1, 2, 0, 2, 1,
        1, 2, 0, 2, 2,
        1, 2, 0, 2, 3,
        1, 2, 0, 3, 0,
        1, 2, 0, 3, 1,
        1, 2, 0, 3, 2,
        1, 2, 0, 3, 3,
        1, 2, 1, 0, 0,
        1, 2, 1, 0, 1,
        1, 2, 1, 0, 2,
        1, 2, 1, 0, 3,
        1, 2, 1, 1, 0,
        1, 2, 1, 1, 1,
        1, 2, 1, 1, 2,
        1, 2, 1, 1, 3,
        1, 2, 1, 2, 0,
        1, 2, 1, 2, 1,
        1, 2, 1, 2, 2,
        1, 2, 1, 2, 3,
        1, 2, 1, 3, 0,
        1, 2, 1, 3, 1,
        1, 2, 1, 3, 2,
        1, 2, 1, 3, 3,
        1, 2, 2, 0, 0,
        1, 2, 2, 0, 1,
        1, 2, 2, 0, 2,
        1, 2, 2, 0, 3,
        1, 2, 2, 1, 0,
        1, 2, 2, 1, 1,
        1, 2, 2, 1, 2,
        1, 2, 2, 1, 3,
        1, 2, 2, 2, 0,
        1, 2, 2, 2, 1,
        1, 2, 2, 2, 2,
        1, 2, 2, 2, 3,
        1, 2, 2, 3, 0,
        1, 2, 2, 3, 1,
        1, 2, 2, 3, 2,
        1, 2, 2, 3, 3,
        1, 2, 3, 0, 0,
        1, 2, 3, 0, 1,
        1, 2, 3, 0, 2,
        1, 2, 3, 0, 3,
        1, 2, 3, 1, 0,
        1, 2, 3, 1, 1,
        1, 2, 3, 1, 2,
        1, 2, 3, 1, 3,
        1, 2, 3, 2, 0,
        1, 2, 3, 2, 1,
        1, 2, 3, 2, 2,
        1, 2, 3, 2, 3,
        1, 2, 3, 3, 0,
        1, 2, 3, 3, 1,
        1, 2, 3, 3, 2,
        1, 2, 3, 3, 3,
        1, 3, 0, 0, 0,
        1, 3, 0, 0, 1,
        1, 3, 0, 0, 2,
        1, 3, 0, 0, 3,
        1, 3, 0, 1, 0,
        1, 3, 0, 1, 1,
        1, 3, 0, 1, 2,
        1, 3, 0, 1, 3,
        1, 3, 0, 2, 0,
        1, 3, 0, 2, 1,
        1, 3, 0, 2, 2,
        1, 3, 0, 2, 3,
        1, 3, 0, 3, 0,
        1, 3, 0, 3, 1,
        1, 3, 0, 3, 2,
        1, 3, 0, 3, 3,
        1, 3, 1, 0, 0,
        1, 3, 1, 0, 1,
        1, 3, 1, 0, 2,
        1, 3, 1, 0, 3,
        1, 3, 1, 1, 0,
        1, 3, 1, 1, 1,
        1, 3, 1, 1, 2,
        1, 3, 1, 1, 3,
        1, 3, 1, 2, 0,
        1, 3, 1, 2, 1,
        1, 3, 1, 2, 2,
        1, 3, 1, 2, 3,
        1, 3, 1, 3, 0,
        1, 3, 1, 3, 1,
        1, 3, 1, 3, 2,
        1, 3, 1, 3, 3,
        1, 3, 2, 0, 0,
        1, 3, 2, 0, 1,
        1, 3, 2, 0, 2,
        1, 3, 2, 0, 3,
        1, 3, 2, 1, 0,
        1, 3, 2, 1, 1,
        1, 3, 2, 1, 2,
        1, 3, 2, 1, 3,
        1, 3, 2, 2, 0,
        1, 3, 2, 2, 1,
        1, 3, 2, 2, 2,
        1, 3, 2, 2, 3,
        1, 3, 2, 3, 0,
        1, 3, 2, 3, 1,
        1, 3, 2, 3, 2,
        1, 3, 2, 3, 3,
        1, 3, 3, 0, 0,
        1, 3, 3, 0, 1,
        1, 3, 3, 0, 2,
        1, 3, 3, 0, 3,
        1, 3, 3, 1, 0,
        1, 3, 3, 1, 1,
        1, 3, 3, 1, 2,
        1, 3, 3, 1, 3,
        1, 3, 3, 2, 0,
        1, 3, 3, 2, 1,
        1, 3, 3, 2, 2,
        1, 3, 3, 2, 3,
        1, 3, 3, 3, 0,
        1, 3, 3, 3, 1,
        1, 3, 3, 3, 2,
        1, 3, 3, 3, 3};

#endif //TORICCODE_ERRORFUNC_H
